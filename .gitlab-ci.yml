#image: python:2.7
image: debian:stretch

before_script:
#  - cat /etc/apt/sources.list | sed 's/deb /deb-src /g' >> /etc/apt/sources.list
  - apt-get update
  - apt-get install -y python-pip python-pytest-cov 
  - apt-get install -y python-numpy python-matplotlib
  - apt-get install -y python-astropy python-photutils python-healpy python-wcsaxes
#  - apt-get build-dep -y python-numpy
#  - apt-get build-dep -y matplotlib
#  - pip install numpy astropy healpy photutils matplotlib
  
stages:
  - test

test_job:
  stage: test
  only:
    - master
  tags:
    - test
  script:
    - py.test